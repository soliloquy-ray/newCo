webpackJsonp([0],{193:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return ImageTrackerComponent});var __WEBPACK_IMPORTED_MODULE_0_tslib__=__webpack_require__(7),__WEBPACK_IMPORTED_MODULE_1__angular_core__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_2_ionic_angular__=__webpack_require__(79),__WEBPACK_IMPORTED_MODULE_3__providers_evt_evt__=__webpack_require__(71),__WEBPACK_IMPORTED_MODULE_4_blueimp_load_image__=__webpack_require__(539),__WEBPACK_IMPORTED_MODULE_4_blueimp_load_image___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_blueimp_load_image__),ImageTrackerComponent=function(){function ImageTrackerComponent(n,t){this.loader=n,this.evt=t,this.tstamp=Date.now(),this.cygHistory=[],this.cloudName="cloudstrife",this.uploadPreset="iqx9xm8u",this.photoProg=[],this.canAddTodaysPhoto=!1,this.uploaded=new __WEBPACK_IMPORTED_MODULE_1__angular_core__.l,this.isLoggedIn=!1,console.log("Hello ImageTrackerComponent Component"),this.text="Hello World"}return ImageTrackerComponent.prototype.ngOnInit=function(){},ImageTrackerComponent.prototype.ngAfterViewInit=function(){var n=this,t=this;this.evt.getUserCustomFields().then(function(e){t.photoProg=e.photoHistory||[],t.photoProg.length<1?n.fetchCYGfromStorage():localStorage.cygHistory=JSON.stringify(t.photoProg),t.uploaded.emit(!1),setTimeout(function(){t.slider.slideTo(t.photoProg.length-1)},500),t.canUploadPhoto()})},ImageTrackerComponent.prototype.patchEVTUserCF=function(){var n=this;this.evt.getUserCustomFields().then(function(t){var e=t||{};return e.photoHistory=n.photoProg,console.log(e),e}).catch(console.info).then(function(t){var e={customFields:t};console.log(e),n.evt.getUserContext().then(function(n){console.log(n),n.update(e).then(console.log).catch(console.info)}).catch(console.info)}).catch(console.info)},ImageTrackerComponent.prototype.canUploadPhoto=function(){var n=this;n.canIHasToday().then(function(t){console.log(t),t?(n.canAddTodaysPhoto=!0,"1"===localStorage.debugMode&&(n.canAddTodaysPhoto=!0,n.tstamp=n.getNextAvailablePushDate())):n.canAddTodaysPhoto=!0})},ImageTrackerComponent.prototype.canIHasToday=function(){var n=this;return new Promise(function(t,e){if(void 0===localStorage.cygHistory||"{}"===localStorage.cygHistory)t(!1);else{t(JSON.parse(localStorage.cygHistory).find(function(t){return n.toLocaleDateString(t.timestamp)==n.toLocaleDateString(n.tstamp)}))}})},ImageTrackerComponent.prototype.sliderChanged=function(n){void 0===n&&(n=null),this.slider.isBeginning()?(this.slider.lockSwipeToPrev(!0),this.slider.lockSwipeToNext(!1)):this.slider.isEnd()?(this.slider.lockSwipeToNext(!0),this.slider.lockSwipeToPrev(!1)):(this.slider.lockSwipeToPrev(!1),this.slider.lockSwipeToNext(!1))},ImageTrackerComponent.prototype.unlockSlides=function(){this.slider.lockSwipeToNext(!1),this.slider.lockSwipeToPrev(!1)},ImageTrackerComponent.prototype.takePhotoAction=function(n){},ImageTrackerComponent.prototype.takePic=function(n){n.target.files&&n.target.files[0]&&this.uploadFile(n.target.files[0])},ImageTrackerComponent.prototype.uploadFile=function(n){var t=this.loader.create({spinner:"crescent",dismissOnPageChange:!0,showBackdrop:!0,content:"Please wait...",enableBackdropDismiss:!0});t.present();var e=this,l="https://api.cloudinary.com/v1_1/"+e.cloudName+"/image/upload",o=new XMLHttpRequest,a=new FormData;o.open("POST",l,!0),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),__WEBPACK_IMPORTED_MODULE_4_blueimp_load_image__.parseMetaData(n,function(l){var u=0;l.exif&&(u=l.exif.get("Orientation")),__WEBPACK_IMPORTED_MODULE_4_blueimp_load_image__(n,function(l){var u=l.toDataURL("image/jpeg");o.onreadystatechange=function(n){if(4==o.readyState&&200==o.status){var l=JSON.parse(o.responseText);console.log(l),e.photoProg.push({photoUrl:l.secure_url,timestamp:e.tstamp}),e.patchEVTUserCF(),e.unlockSlides(),setTimeout(function(){e.slider.slideTo(e.photoProg.length-1),localStorage.cygHistory=JSON.stringify(e.photoProg),e.uploaded.emit(!0),e.canAddTodaysPhoto=!0},500),t.dismiss()}};var i=n.name;a.append("file",u),a.append("public_id",i),a.append("timestamp",e.tstamp.toString()),a.append("tags","browser_upload"),a.append("upload_preset",e.uploadPreset),o.send(a)},{canvas:!0,orientation:u,maxWidth:400,maxHeight:400})})},ImageTrackerComponent.prototype.toLocaleDateString=function(n){return new Date(parseInt(n)).toLocaleDateString()},ImageTrackerComponent.prototype.getNextAvailablePushDate=function(){var dy=eval(localStorage.cygHistory).sort(this.compare),tmpD=(new Date).setDate(new Date(dy[dy.length-1].timestamp).getDate()+1);return tmpD=new Date(tmpD).setMonth(new Date(dy[dy.length-1].timestamp).getMonth())},ImageTrackerComponent.prototype.compare=function(n,t){return n.timestamp<t.timestamp?-1:n.timestamp>t.timestamp?1:0},ImageTrackerComponent.prototype.fetchCYGfromStorage=function(){localStorage.cygHistory&&"{}"!==localStorage.cygHistory&&JSON.parse(localStorage.cygHistory)&&(this.photoProg=JSON.parse(localStorage.cygHistory))},ImageTrackerComponent.prototype.getPhotoCount=function(){return this.photoProg.length},ImageTrackerComponent}()},203:function(n,t){function e(n){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+n+"'.")})}e.keys=function(){return[]},e.resolve=e,n.exports=e,e.id=203},238:function(n,t){function e(n){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+n+"'.")})}e.keys=function(){return[]},e.resolve=e,n.exports=e,e.id=238},327:function(n,t,e){"use strict";function l(n){return c._19(0,[(n()(),c.Z(0,0,null,null,2,"ion-nav",[],null,null,null,O.b,O.a)),c._15(6144,null,U.a,null,[A.a]),c.Y(2,4374528,null,0,A.a,[[2,M.a],[2,x.a],H.a,Z.a,N.a,c.j,c.u,c.z,c.i,L.l,R.a,[2,B.a],F.a,c.k],{root:[0,"root"]},null),(n()(),c._18(-1,null,["\n"]))],function(n,t){n(t,2,0,t.component.rootPage)},null)}function o(n){return c._19(0,[(n()(),c.Z(0,0,null,null,10,"ion-slide",[],null,null,null,$.b,$.a)),c.Y(1,180224,null,0,nn.a,[c.j,c.z,tn.a],null,null),(n()(),c._18(-1,0,["\n\t\t"])),(n()(),c.Z(3,0,null,0,1,"p",[["class","dayctr"]],null,null,null,null,null)),(n()(),c._18(4,null,["Day ",""])),(n()(),c._18(-1,0,["\n\t\t"])),(n()(),c.Z(6,0,null,0,3,"div",[["class","photo-main"]],null,null,null,null,null)),(n()(),c._18(-1,null,["\n\t\t\t"])),(n()(),c.Z(8,0,null,null,0,"img",[],[[8,"className",0],[8,"src",4]],null,null,null,null)),(n()(),c._18(-1,null,["\n\t\t"])),(n()(),c._18(-1,0,["\n\t"]))],null,function(n,t){n(t,4,0,t.context.index+1);n(t,8,0,c._2(1,"i",t.context.index,""),null==t.context.$implicit?null:t.context.$implicit.photoUrl)})}function a(n){return c._19(0,[(n()(),c.Z(0,0,null,null,11,"ion-slide",[["class","more-pic"]],null,null,null,$.b,$.a)),c.Y(1,180224,null,0,nn.a,[c.j,c.z,tn.a],null,null),(n()(),c._18(-1,0,["\n\t\t"])),(n()(),c.Z(3,0,null,0,1,"p",[["class","dayctr"]],null,null,null,null,null)),(n()(),c._18(4,null,["Day ",""])),(n()(),c._18(-1,0,["\n\t\t"])),(n()(),c.Z(6,0,null,0,4,"div",[["class","photo-main"]],null,null,null,null,null)),(n()(),c._18(-1,null,["\n   \t \t\t"])),(n()(),c.Z(8,0,null,null,0,"input",[["accept","image/*"],["capture","camera"],["type","file"]],null,[[null,"tap"],[null,"change"]],function(n,t,e){var l=!0,o=n.component;if("tap"===t){l=!1!==o.takePhotoAction(e)&&l}if("change"===t){l=!1!==o.takePic(e)&&l}return l},null,null)),(n()(),c._18(-1,null,[" "])),(n()(),c._18(-1,null,["\n   \t \t"])),(n()(),c._18(-1,0,["\n\t"]))],null,function(n,t){var e=t.component;n(t,4,0,(null==e.photoProg?null:e.photoProg.length)+1)})}function u(n){return c._19(0,[c._16(402653184,1,{slider:0}),(n()(),c._18(-1,null,["\n"])),(n()(),c.Z(2,0,null,null,23,"div",[],null,null,null,null,null)),(n()(),c._18(-1,null,["\n  "])),(n()(),c.Z(4,0,null,null,1,"p",[["class","title"]],null,null,null,null,null)),(n()(),c._18(-1,null,["Image Tracker"])),(n()(),c._18(-1,null,["\n  "])),(n()(),c.Z(7,0,null,null,17,"ion-slides",[["slidesPerView","auto"],["spaceBetween","13"],["zoom","false"]],null,[[null,"ionSlideDidChange"]],function(n,t,e){var l=!0;if("ionSlideDidChange"===t){l=!1!==n.component.sliderChanged(e)&&l}return l},en.b,en.a)),c.Y(8,1228800,[[1,4],["Slides",4]],0,tn.a,[Z.a,N.a,c.u,[2,M.a],c.j,c.z],{zoom:[0,"zoom"],spaceBetween:[1,"spaceBetween"],slidesPerView:[2,"slidesPerView"]},{ionSlideDidChange:"ionSlideDidChange"}),(n()(),c._18(-1,0,["\n\t"])),(n()(),c.U(16777216,null,0,1,null,o)),c.Y(11,802816,null,0,ln.h,[c.I,c.F,c.p],{ngForOf:[0,"ngForOf"]},null),(n()(),c._18(-1,0,["\n\t"])),(n()(),c.U(16777216,null,0,1,null,a)),c.Y(14,16384,null,0,ln.i,[c.I,c.F],{ngIf:[0,"ngIf"]},null),(n()(),c._18(-1,0,["\n\t"])),(n()(),c.Z(16,0,null,0,7,"ion-slide",[["class","buffer"]],null,null,null,$.b,$.a)),c.Y(17,180224,null,0,nn.a,[c.j,c.z,tn.a],null,null),(n()(),c._18(-1,0,["\n\t\t"])),(n()(),c.Z(19,0,null,0,1,"p",[["class","dayctr"]],null,null,null,null,null)),(n()(),c._18(20,null,["Day ",""])),(n()(),c._18(-1,0,["\n\t\t"])),(n()(),c.Z(22,0,null,0,0,"div",[["class","photo-main"]],null,null,null,null,null)),(n()(),c._18(-1,0,["\n\t"])),(n()(),c._18(-1,0,["\n  "])),(n()(),c._18(-1,null,["\n"])),(n()(),c._18(-1,null,["\n"]))],function(n,t){var e=t.component;n(t,8,0,"false","13","auto");n(t,11,0,e.photoProg);n(t,14,0,e.canAddTodaysPhoto)},function(n,t){var e=t.component;n(t,20,0,(null==e.photoProg?null:e.photoProg.length)+1)})}function i(n){return c._19(0,[(n()(),c.Z(0,0,null,null,10,"ion-header",[],null,null,null,null,null)),c.Y(1,16384,null,0,z.a,[Z.a,c.j,c.z,[2,M.a]],null,null),(n()(),c._18(-1,null,["\n  "])),(n()(),c.Z(3,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,K.b,K.a)),c.Y(4,49152,null,0,W.a,[H.a,[2,M.a],[2,x.a],Z.a,c.j,c.z],null,null),(n()(),c._18(-1,3,["\n    "])),(n()(),c.Z(6,0,null,3,2,"ion-title",[],null,null,null,Y.b,Y.a)),c.Y(7,49152,null,0,V.a,[Z.a,c.j,c.z,[2,X.a],[2,W.a]],null,null),(n()(),c._18(-1,0,["\n      Ionic Blank\n    "])),(n()(),c._18(-1,3,["\n  "])),(n()(),c._18(-1,null,["\n"])),(n()(),c._18(-1,null,["\n\n"])),(n()(),c.Z(12,0,null,null,5,"ion-content",[["padding",""]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,J.b,J.a)),c.Y(13,4374528,null,0,G.a,[Z.a,N.a,F.a,c.j,c.z,H.a,Q.a,c.u,[2,M.a],[2,x.a]],null,null),(n()(),c._18(-1,1,["\n"])),(n()(),c.Z(15,0,null,1,1,"image-tracker",[],null,null,null,u,an)),c.Y(16,4308992,null,0,m.a,[on.a,p.a],null,null),(n()(),c._18(-1,1,["\n"])),(n()(),c._18(-1,null,["\n"]))],function(n,t){n(t,16,0)},function(n,t){n(t,3,0,c._13(t,4)._hidden,c._13(t,4)._sbPadding);n(t,12,0,c._13(t,13).statusbarPadding,c._13(t,13)._hasRefresher)})}Object.defineProperty(t,"__esModule",{value:!0});var r=e(44),c=e(0),s=(e(7),e(79),e(119)),_=e(120),p=e(71),d=function(){function n(n,t){this.navCtrl=n,this.evt=t}return n.prototype.ngOnInit=function(){this.evt.evtApp.login({email:"test@gmail.com",password:"pass1234"}).then(function(n){console.log(n.user)})},n.prototype.createUser=function(){this.evt.createUser({email:"test@gmail.com",password:"pass1234",firstName:"Bob",lastName:"Lapprovittola"}).then(function(n){localStorage.evrythngApiKey=n.evrythngApiKey,localStorage.evrythngUser=n.evrythngUser},function(n){console.info(n)})},n}(),g=function(){return function(n,t,e){this.rootPage=d,n.ready().then(function(){t.styleDefault(),e.hide()})}}(),h=e(173),m=e(193),f=function(){return function(){}}(),y=function(){return function(){}}(),P=function(){return function(){}}(),v=e(80),b=e(543),k=e(544),T=e(545),w=e(546),C=e(547),D=e(548),S=e(549),I=e(550),E=e(551),O=e(552),U=e(58),A=e(87),M=e(5),x=e(31),H=e(10),Z=e(1),N=e(4),L=e(9),R=e(48),B=e(24),F=e(12),j=c.X({encapsulation:2,styles:[],data:{}}),q=c.V("ng-component",g,function(n){return c._19(0,[(n()(),c.Z(0,0,null,null,1,"ng-component",[],null,null,null,l,j)),c.Y(1,49152,null,0,g,[N.a,_.a,s.a],null,null)],null,null)},{},{},[]),z=e(164),K=e(553),W=e(52),Y=e(554),V=e(118),X=e(70),J=e(555),G=e(36),Q=e(50),$=e(556),nn=e(115),tn=e(69),en=e(557),ln=e(22),on=e(86),an=c.X({encapsulation:2,styles:[],data:{}}),un=c.X({encapsulation:2,styles:[],data:{}}),rn=c.V("page-home",d,function(n){return c._19(0,[(n()(),c.Z(0,0,null,null,1,"page-home",[],null,null,null,i,un)),c.Y(1,114688,null,0,d,[x.a,p.a],null,null)],function(n,t){n(t,1,0)},null)},{},{},[]),cn=e(32),sn=e(172),_n=e(143),pn=e(145),dn=e(169),gn=e(29),hn=e(51),mn=e(262),fn=e(82),yn=e(68),Pn=e(152),vn=e(105),bn=e(157),kn=e(168),Tn=e(163),wn=e(261),Cn=e(170),Dn=e(46),Sn=e(151),In=e(171),En=c.W(P,[v.b],function(n){return c._10([c._11(512,c.i,c.S,[[8,[b.a,k.a,T.a,w.a,C.a,D.a,S.a,I.a,E.a,q,rn]],[3,c.i],c.s]),c._11(5120,c.r,c._9,[[3,c.r]]),c._11(4608,ln.k,ln.j,[c.r,[2,ln.s]]),c._11(4608,cn.k,cn.k,[]),c._11(4608,cn.c,cn.c,[]),c._11(5120,c.b,c._0,[]),c._11(5120,c.p,c._6,[]),c._11(5120,c.q,c._7,[]),c._11(4608,r.c,r.q,[ln.c]),c._11(6144,c.D,null,[r.c]),c._11(4608,r.f,sn.a,[]),c._11(5120,r.d,function(n,t,e,l,o){return[new r.k(n,t),new r.o(e),new r.n(l,o)]},[ln.c,c.u,ln.c,ln.c,r.f]),c._11(4608,r.e,r.e,[r.d,c.u]),c._11(135680,r.m,r.m,[ln.c]),c._11(4608,r.l,r.l,[r.e,r.m]),c._11(6144,c.B,null,[r.l]),c._11(6144,r.p,null,[r.m]),c._11(4608,c.G,c.G,[c.u]),c._11(4608,r.h,r.h,[ln.c]),c._11(4608,r.i,r.i,[ln.c]),c._11(4608,h.c,h.c,[]),c._11(4608,h.g,h.b,[]),c._11(5120,h.i,h.j,[]),c._11(4608,h.h,h.h,[h.c,h.g,h.i]),c._11(4608,h.f,h.a,[]),c._11(5120,h.d,h.k,[h.h,h.f]),c._11(4608,_n.a,_n.a,[H.a,Z.a]),c._11(4608,pn.a,pn.a,[H.a,Z.a]),c._11(4608,dn.a,dn.a,[]),c._11(4608,gn.a,gn.a,[]),c._11(4608,hn.a,hn.a,[N.a]),c._11(4608,Q.a,Q.a,[Z.a,N.a,c.u,F.a]),c._11(4608,on.a,on.a,[H.a,Z.a]),c._11(5120,ln.f,mn.b,[ln.q,[2,ln.a],Z.a]),c._11(4608,ln.e,ln.e,[ln.f]),c._11(5120,fn.b,fn.d,[H.a,fn.a]),c._11(5120,B.a,B.b,[H.a,fn.b,ln.e,yn.b,c.i]),c._11(4608,Pn.a,Pn.a,[H.a,Z.a,B.a]),c._11(4608,vn.a,vn.a,[H.a,Z.a]),c._11(4608,bn.a,bn.a,[H.a,Z.a,B.a]),c._11(4608,kn.a,kn.a,[Z.a,N.a,F.a,H.a,L.l]),c._11(4608,Tn.a,Tn.a,[H.a,Z.a]),c._11(4608,R.a,R.a,[N.a,Z.a]),c._11(4608,_.a,_.a,[]),c._11(4608,s.a,s.a,[]),c._11(4608,p.a,p.a,[h.d]),c._11(512,ln.b,ln.b,[]),c._11(512,cn.j,cn.j,[]),c._11(512,cn.d,cn.d,[]),c._11(512,cn.i,cn.i,[]),c._11(512,mn.a,mn.a,[]),c._11(512,f,f,[]),c._11(512,y,y,[]),c._11(512,c.k,wn.a,[]),c._11(256,Z.b,{},[]),c._11(1024,Cn.a,Cn.b,[]),c._11(1024,N.a,N.b,[r.b,Cn.a,c.u]),c._11(1024,Z.a,Z.c,[Z.b,N.a]),c._11(512,F.a,F.a,[N.a]),c._11(512,Dn.a,Dn.a,[]),c._11(512,H.a,H.a,[Z.a,N.a,[2,Dn.a]]),c._11(512,L.l,L.l,[H.a]),c._11(256,fn.a,{links:[]},[]),c._11(512,c.h,c.h,[]),c._11(512,Sn.a,Sn.a,[c.h]),c._11(1024,yn.b,yn.c,[Sn.a,c.o]),c._11(1024,c.c,function(n,t,e,l,o,a,u,i,c,s,_,p,d){return[r.s(n),In.a(t),dn.b(e,l),kn.b(o,a,u,i,c),yn.d(s,_,p,d)]},[[2,c.t],Z.a,N.a,F.a,Z.a,N.a,F.a,H.a,L.l,Z.a,fn.a,yn.b,c.u]),c._11(512,c.d,c.d,[[2,c.c]]),c._11(131584,c.f,c.f,[c.u,c.T,c.o,c.k,c.i,c.d]),c._11(512,c.e,c.e,[c.f]),c._11(512,r.a,r.a,[[3,r.a]]),c._11(512,h.e,h.e,[]),c._11(512,P,P,[]),c._11(256,v.a,g,[]),c._11(256,ln.a,"/",[])])});Object(c.M)(),Object(r.j)().bootstrapModuleFactory(En)},376:function(n,t){},410:function(n,t){},411:function(n,t){},478:function(n,t){},71:function(n,t,e){"use strict";e.d(t,"a",function(){return a});e(7);var l=e(361),o=(e.n(l),e(362)),a=(e.n(o),function(){function n(n){this.http=n,localStorage.evrythngApiKey="PfaZ66GBFcScOcANRiUacBs9kOzCLXDpr8AF4n2dfiZpHFUDibxMR13oIoJXUhLElLOme6MuiERRZ1CN",localStorage.evrythngUser="UHh2wE4hVDPRQpwaREFgEaan",o.setup({geolocation:!0,filter:{method:["ir","2d","qr"]}}),this.evtApp=new o.App("HIxc1MxvO18AJQz6Cnibu9Xiv4A1h6WTH0kNtzvP4fPGoIKWGhA5Qvudi8X21b4xgMo4CtDszxrVD13f"),console.log(this.evtApp)}return n.prototype.createUser=function(n){return this.evtApp.appUser().create({email:n.email,password:n.password,firstName:n.firstName,lastName:n.lastName}).then(function(n){return n.validate()}).catch(function(n){return n})},n.prototype.getUserCustomFields=function(){var n=this;return new Promise(function(t,e){n.getUserContext().then(function(n){n.$init.then(function(n){console.log(n),t(void 0!==n.customFields&&n.customFields)})}).catch(function(n){e(n)})})},n.prototype.getUserContext=function(){var n=this;return new Promise(function(t,e){t(new o.User({id:localStorage.evrythngUser,apiKey:localStorage.evrythngApiKey},n.evtApp))})},n}())}},[327]);